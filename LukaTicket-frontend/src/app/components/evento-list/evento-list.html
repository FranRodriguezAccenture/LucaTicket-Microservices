<div class="container mt-4">
  <div class="row mb-4">
    <div class="col-12">
      <h2 class="text-center text-primary mb-4">
        <i class="bi bi-calendar-event me-2"></i>Eventos Disponibles
      </h2>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="isLoading()" class="row justify-content-center">
    <div class="col-md-6 text-center">
      <div class="card border-0 shadow-sm">
        <div class="card-body py-5">
          <div class="spinner-border text-primary mb-3" role="status">
            <span class="visually-hidden">Cargando...</span>
          </div>
          <h5 class="text-muted">Cargando eventos...</h5>
          <p class="text-muted small">Por favor, espere un momento</p>
        </div>
      </div>
    </div>
  </div>

  <!-- No Events State -->
  <div *ngIf="!isLoading() && eventos().length === 0" class="row justify-content-center">
    <div class="col-md-6">
      <div class="card border-warning shadow-sm">
        <div class="card-body text-center py-5">
          <i class="bi bi-calendar-x text-warning" style="font-size: 3rem;"></i>
          <h4 class="mt-3 text-warning">No hay eventos disponibles</h4>
          <p class="text-muted">No se encontraron eventos en este momento</p>
          <button class="btn btn-outline-primary mt-2" (click)="cargarEventos()">
            <i class="bi bi-arrow-clockwise me-1"></i>Reintentar
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Events Grid -->
  <div *ngIf="!isLoading() && eventos().length > 0" class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    <div *ngFor="let evento of eventos()" class="col">
      <div class="card h-100 border-0 shadow-sm hover-shadow">
        <div class="card-header bg-primary text-white">
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="card-title mb-0">{{ evento.nombre }}</h5>
            <span class="badge bg-light text-dark">
              <i class="bi bi-music-note-beamed me-1"></i>{{ evento.genero }}
            </span>
          </div>
        </div>

        <div class="card-body">
          <p class="card-text text-muted mb-4">
            <i class="bi bi-chat-quote me-1"></i>{{ evento.descripcion }}
          </p>

          <div class="evento-info">
            <div class="d-flex align-items-center mb-2">
              <i class="bi bi-calendar-date text-primary me-2"></i>
              <div>
                <small class="text-muted d-block">Fecha</small>
                <strong>{{ evento.fechaEvento | date:'dd/MM/yyyy' }}</strong>
              </div>
            </div>

            <div class="d-flex align-items-center mb-2">
              <i class="bi bi-clock text-primary me-2"></i>
              <div>
                <small class="text-muted d-block">Hora</small>
                <strong>{{ evento.horaEvento }}</strong>
              </div>
            </div>

            <div class="d-flex align-items-center mb-2">
              <i class="bi bi-geo-alt text-primary me-2"></i>
              <div>
                <small class="text-muted d-block">Lugar</small>
                <strong>{{ evento.recinto }}, {{ evento.localidad }}</strong>
              </div>
            </div>

            <div class="d-flex align-items-center mb-3">
              <i class="bi bi-tag text-primary me-2"></i>
              <div>
                <small class="text-muted d-block">Precio</small>
                <strong>
                  {{ evento.precioMin | currency:'EUR' }} - {{ evento.precioMax | currency:'EUR' }}
                </strong>
              </div>
            </div>
          </div>
        </div>

        <!-- evento-list.html - Añadir botones de acciones en cada card -->
        <div class="card-footer">
          <div class="d-flex gap-2">
            <!-- Botón COMPRAR (separado) -->
            <button class="btn btn-primary flex-grow-1" [routerLink]="['/comprar', evento.id]">
              <i class="bi bi-ticket-perforated me-2"></i>Comprar
            </button>

            <!-- Botón VER (routerLink funciona) -->
            <a [routerLink]="['/eventos', evento.id]" class="btn btn-outline-info" title="Ver detalles">
              <i class="bi bi-eye"></i>
            </a>

            <!-- Botón EDITAR (routerLink funciona) -->
            <a [routerLink]="['/eventos', evento.id, 'editar']" class="btn btn-outline-warning" title="Editar evento">
              <i class="bi bi-pencil"></i>
            </a>

            <!-- Botón ELIMINAR (click funciona) -->
            <button class="btn btn-outline-danger" (click)="eliminarEvento(evento.id, evento.nombre)"
              title="Eliminar evento">
              <i class="bi bi-trash"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Pagination (opcional) -->
  <div *ngIf="!isLoading() && eventos().length > 0" class="row mt-4">
    <div class="col-12">
      <nav aria-label="Navegación de eventos">
        <ul class="pagination justify-content-center">
          <li class="page-item disabled">
            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">
              <i class="bi bi-chevron-left"></i>
            </a>
          </li>
          <li class="page-item active"><a class="page-link" href="#">1</a></li>
          <li class="page-item"><a class="page-link" href="#">2</a></li>
          <li class="page-item"><a class="page-link" href="#">3</a></li>
          <li class="page-item">
            <a class="page-link" href="#">
              <i class="bi bi-chevron-right"></i>
            </a>
          </li>
        </ul>
      </nav>
      <p class="text-center text-muted small mt-2">
        Mostrando {{ eventos().length }} eventos disponibles
      </p>
    </div>
  </div>
</div>
